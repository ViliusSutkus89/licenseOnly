plugins {
    id 'com.android.library'
    id 'maven-publish'
    id 'signing'
}

group = 'com.viliussutkus89.licenseOnly'

android {
    compileSdk 32
    defaultConfig {
        minSdk 16
        targetSdk 32

        versionCode 1
        versionName '0.40.0'
    }
}

task sourceJar(type: Jar) {
    archiveClassifier.set('sources')
}

task javadocJar(type: Jar) {
    archiveClassifier.set('javadoc')
}

afterEvaluate {
    publishing {
        publications {
            release(MavenPublication) {
                from components.release

                artifactId project.name
                version = android.defaultConfig.versionName

                artifact sourceJar
                artifact javadocJar

                pom {
                    name = project.name
                    description = 'Pixman is a low-level software library for pixel manipulation, providing features such as image compositing and trapezoid rasterization.'
                    url = 'https://gitlab.freedesktop.org/pixman/pixman'
                    packaging = 'aar'
                    inceptionYear = '1987'
                    licenses {
                        license {
                            name = 'MIT'
                            url = 'https://gitlab.freedesktop.org/pixman/pixman/-/blob/pixman-0.40.0/COPYING'
                            distribution = 'repo'
                        }
                    }
                    scm {
                        url = 'https://gitlab.freedesktop.org/pixman/pixman'
                        connection = 'https://gitlab.freedesktop.org/pixman/pixman.git'
                    }
                    developers {
                        // https://gitlab.freedesktop.org/pixman/pixman/-/graphs/pixman-0.40.0
                        developer {
                            name = 'Søren Sandmann Pedersen'
                            email = 'sandmann@redhat.com'
                        }
                        developer {
                            name = 'Søren Sandmann Pedersen'
                            email = 'ssp@redhat.com'
                        }
                        developer {
                            name = 'Siarhei Siamashka'
                            email = 'siarhei.siamashka@nokia.com'
                        }
                        developer {
                            name = 'Matt Turner'
                            email = 'mattst88@gmail.com'
                        }
                        developer {
                            name = 'Andrea Canciani'
                            email = 'ranma42@gmail.com'
                        }
                        developer {
                            name = 'Soren Sandmann Pedersen'
                            email = 'ssp@dhcp83-218.boston.redhat.com'
                        }
                        developer {
                            name = 'Siarhei Siamashka'
                            email = 'siarhei.siamashka@gmail.com'
                        }
                        developer {
                            name = 'Benjamin Otte'
                            email = 'otte@gnome.org'
                        }
                        developer {
                            name = 'Søren Sandmann Pedersen'
                            email = 'sandmann@daimi.au.dk'
                        }
                        developer {
                            name = 'Ben Avison'
                            email = 'bavison@riscosopen.org'
                        }
                        developer {
                            name = 'Nemanja Lukic'
                            email = 'nemanja.lukic@rt-rk.com'
                        }
                        developer {
                            name = 'Aaron Plattner'
                            email = 'aplattner@nvidia.com'
                        }
                        developer {
                            name = 'Jeff Muizelaar'
                            email = 'jmuizelaar@mozilla.com'
                        }
                        developer {
                            name = 'Taekyun Kim'
                            email = 'tkq.kim@samsung.com'
                        }
                        developer {
                            name = 'Oded Gabbay'
                            email = 'oded.gabbay@gmail.com'
                        }
                        developer {
                            name = 'Chris Wilson'
                            email = 'chris@chris-wilson.co.uk'
                        }
                        developer {
                            name = 'Pekka Paalanen'
                            email = 'pekka.paalanen@collabora.co.uk'
                        }
                        developer {
                            name = 'Adam Jackson'
                            email = 'ajax@redhat.com'
                        }
                        developer {
                            name = 'Jonathan Morton'
                            email = 'jmorton@sd070.hel.movial.fi'
                        }
                        developer {
                            name = 'M Joonas Pihlaja'
                            email = 'jpihlaja@cc.helsinki.fi'
                        }
                        developer {
                            name = 'Chun-wei Fan'
                            email = 'fanchunwei@src.gnome.org'
                        }
                        developer {
                            name = 'Dylan Baker'
                            email = 'dylan@pnwbakers.com'
                        }
                        developer {
                            name = 'Alexander Larsson'
                            email = 'alexl@redhat.com'
                        }
                        developer {
                            name = 'Luca Barbato'
                            email = 'lu_zero@gentoo.org'
                        }
                        developer {
                            name = 'Vladimir Vukicevic'
                            email = 'vladimir@pobox.com'
                        }
                        developer {
                            name = 'Carl Worth'
                            email = 'cworth@cworth.org'
                        }
                        developer {
                            name = 'Bill Spitzak'
                            email = 'spitzak@gmail.com'
                        }
                        developer {
                            name = 'Benjamin Otte'
                            email = 'otte@redhat.com'
                        }
                        developer {
                            name = 'Alan Coopersmith'
                            email = 'alan.coopersmith@sun.com'
                        }
                        developer {
                            name = 'José Fonseca'
                            email = 'jrfonseca@tungstengraphics.com'
                        }
                        developer {
                            name = 'Basile Clement'
                            email = 'basile-pixman@clement.pm'
                        }
                        developer {
                            name = 'Maarten Lankhorst'
                            email = 'maarten.lankhorst@linux.intel.com'
                        }
                        developer {
                            name = 'Søren Sandmann Pedersen'
                            email = 'soren.sandmann@gmail.com'
                        }
                        developer {
                            name = 'Jeremy Huddleston'
                            email = 'jeremyhu@apple.com'
                        }
                        developer {
                            name = 'André Tupinambá'
                            email = 'andrelrt@gmail.com'
                        }
                        developer {
                            name = 'Julien Cristau'
                            email = 'jcristau@debian.org'
                        }
                        developer {
                            name = 'Stefan Weil'
                            email = 'sw@weilnetz.de'
                        }
                        developer {
                            name = 'Antti S. Lankila'
                            email = 'alankila@bel.fi'
                        }
                        developer {
                            name = 'Dmitri Vorobiev'
                            email = 'dmitri.vorobiev@movial.com'
                        }
                        developer {
                            name = 'Jonathan Morton'
                            email = 'jonathan.morton@movial.com'
                        }
                        developer {
                            name = 'Carlos Garcia Campos'
                            email = 'carlosgc@gnome.org'
                        }
                        developer {
                            name = 'Søren Sandmann Pedersen'
                            email = 'ssp@dhcp-100-2-40.bos.redhat.com'
                        }
                        developer {
                            name = 'Antoine Azar'
                            email = 'cairo@antoineazar.com'
                        }
                        developer {
                            name = 'Bertram Felgenhauer'
                            email = 'int-e@gmx.de'
                        }
                        developer {
                            name = 'Sebastian Bauer'
                            email = 'mail@sebastianbauer.info'
                        }
                        developer {
                            name = 'Alan Coopersmith'
                            email = 'alan.coopersmith@oracle.com'
                        }
                        developer {
                            name = 'Jon TURNEY'
                            email = 'jon.turney@dronecode.org.uk'
                        }
                        developer {
                            name = 'Rolland Dudemaine'
                            email = 'rolland@ghs.com'
                        }
                        developer {
                            name = 'Makoto Kato'
                            email = 'm_kato@ga2.so-net.ne.jp'
                        }
                        developer {
                            name = 'Frédéric Plourde'
                            email = 'frederic.plourde@polymtl.ca'
                        }
                        developer {
                            name = 'Christoph Reiter'
                            email = 'reiter.christoph@gmail.com'
                        }
                        developer {
                            name = 'Simon Richter'
                            email = 'Simon.Richter@hogyros.de'
                        }
                        developer {
                            name = 'Behdad Esfahbod'
                            email = 'behdad@behdad.org'
                        }
                        developer {
                            name = 'Keith Packard'
                            email = 'keithp@keithp.com'
                        }
                        developer {
                            name = 'Shiyou Yin'
                            email = 'yinshiyou-hf@loongson.cn'
                        }
                        developer {
                            name = 'Mathieu Duponchelle'
                            email = 'mathieu@centricular.com'
                        }
                        developer {
                            name = 'Jonathan Kew'
                            email = 'jfkthame@googlemail.com'
                        }
                        developer {
                            name = 'Thomas Petazzoni'
                            email = 'thomas.petazzoni@free-electrons.com'
                        }
                        developer {
                            name = 'Brad Smith'
                            email = 'brad@comstyle.com'
                        }
                        developer {
                            name = 'ingmar@irsoft.de'
                            email = 'ingmar@irsoft.de'
                        }
                        developer {
                            name = 'Bobby Salazar'
                            email = 'bobby8934@gmail.com'
                        }
                        developer {
                            name = 'Gilles Espinasse'
                            email = 'g.esp@free.fr'
                        }
                        developer {
                            name = 'Alexandros Frantzis'
                            email = 'alexandros.frantzis@linaro.org'
                        }
                        developer {
                            name = 'Cyril Brulebois'
                            email = 'kibi@debian.org'
                        }
                        developer {
                            name = 'Liu Xinyun'
                            email = 'xinyun.liu@intel.com'
                        }
                        developer {
                            name = 'Maarten Bosmans'
                            email = 'mkbosmans@gmail.com'
                        }
                        developer {
                            name = 'Matthias Hopf'
                            email = 'mhopf@suse.de'
                        }
                        developer {
                            name = 'Adrian Bunk'
                            email = 'adrian.bunk@movial.com'
                        }
                        developer {
                            name = 'Luo Jinghua'
                            email = 'sunmoon1997@gmail.com'
                        }
                        developer {
                            name = 'Eric Anholt'
                            email = 'eric@anholt.net'
                        }
                        developer {
                            name = 'Arcady Goldmints-Orlov'
                            email = 'arcadyg@nvidia.com'
                        }
                        developer {
                            name = 'Daniel Stone'
                            email = 'daniel@fooishbar.org'
                        }
                        developer {
                            name = 'Ghabry'
                            email = 'gabriel+github@mastergk.de'
                        }
                        developer {
                            name = 'Federico Mena Quintero'
                            email = 'federico@gnome.org'
                        }
                        developer {
                            name = 'Antonio Ospite'
                            email = 'ao2@ao2.it'
                        }
                        developer {
                            name = 'Khem Raj'
                            email = 'raj.khem@gmail.com'
                        }
                        developer {
                            name = 'Fan Jinke'
                            email = 'fanjinke@hygon.cn'
                        }
                        developer {
                            name = 'Niveditha Rau'
                            email = 'niveditha.rau@oracle.com'
                        }
                        developer {
                            name = 'Vladimir Smirnov'
                            email = 'civil@gentoo.org'
                        }
                        developer {
                            name = 'Dan Horák'
                            email = 'dan@danny.cz'
                        }
                        developer {
                            name = 'Fernando Seiti Furusato'
                            email = 'ferseiti@linux.vnet.ibm.com'
                        }
                        developer {
                            name = 'James Cowgill'
                            email = 'james410@cowgill.org.uk'
                        }
                        developer {
                            name = 'Jakub Bogusz'
                            email = 'qboosh@pld-linux.org'
                        }
                        developer {
                            name = 'Ritesh Khadgaray'
                            email = 'khadgaray@gmail.com'
                        }
                        developer {
                            name = 'Alexander Troosh'
                            email = 'trush@yandex.ru'
                        }
                        developer {
                            name = 'Matthieu Herrb'
                            email = 'matthieu.herrb@laas.fr'
                        }
                        developer {
                            name = 'Markos Chandras'
                            email = 'markos.chandras@imgtec.com'
                        }
                        developer {
                            name = 'Peter Breitenlohner'
                            email = 'peb@mppmu.mpg.de'
                        }
                        developer {
                            name = 'Marko Lindqvist'
                            email = 'cazfi74@gmail.com'
                        }
                        developer {
                            name = 'Benjamin Gilbert'
                            email = 'bgilbert@backtick.net'
                        }
                        developer {
                            name = 'Joshua Root'
                            email = 'jmr@macports.org'
                        }
                        developer {
                            name = 'Benny Siegert'
                            email = 'bsiegert@gmail.com'
                        }
                        developer {
                            name = 'Colin Walters'
                            email = 'walters@verbum.org'
                        }
                        developer {
                            name = 'Naohiro Aota'
                            email = 'naota@gentoo.org'
                        }
                        developer {
                            name = 'Søren Sandmann'
                            email = 'sandmann@cs.au.dk'
                        }
                        developer {
                            name = 'Nis Martensen'
                            email = 'nis.martensen@web.de'
                        }
                        developer {
                            name = 'Dave Yeo'
                            email = 'dave.r.yeo@gmail.com'
                        }
                        developer {
                            name = 'Scott McCreary'
                            email = 'scottmc2@gmail.com'
                        }
                        developer {
                            name = 'Mika Yrjola'
                            email = 'mika.yrjola@movial.com'
                        }
                        developer {
                            name = 'Tor Lillqvist'
                            email = 'tml@iki.fi'
                        }
                    }
                }
            }
        }
    }

    if (System.getenv('SIGNING_KEY')) {
        signing {
            required { true }
            useInMemoryPgpKeys(System.getenv('SIGNING_KEY'), System.getenv('SIGNING_PASS'))
            sign publishing.publications.release
        }
    }
}
